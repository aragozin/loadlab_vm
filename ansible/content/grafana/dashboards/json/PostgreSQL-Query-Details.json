{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "$db_jmeter",
        "enable": false,
        "hide": false,
        "iconColor": "#37872D",
        "limit": 100,
        "name": "(start)",
        "query": "select text,generatorHost,application,title FROM (select text from events where $timeFilter and \"text\" =~ /.*started$/ GROUP BY generatorHost,application,title)",
        "showIn": 0,
        "tags": [],
        "tagsColumn": "generatorHost,application,title",
        "textColumn": "text",
        "type": "tags"
      },
      {
        "datasource": "$db_jmeter",
        "enable": false,
        "hide": false,
        "iconColor": "#1F60C4",
        "name": "(stop)",
        "query": "select \"text\", \"generatorHost\", \"application\" FROM (select text from events where $timeFilter and \"text\" =~ /.*ended$/ GROUP BY  \"generatorHost\", \"application\")",
        "showIn": 0,
        "tagsColumn": "application,generatorHost",
        "textColumn": "text"
      }
    ]
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 1,
  "id": 17,
  "iteration": 1600975657329,
  "links": [],
  "panels": [
    {
      "collapsed": true,
      "datasource": null,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 41,
      "panels": [
        {
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": null,
                "width": 100
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "usename"
                },
                "properties": [
                  {
                    "id": "custom.width"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Total"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": null
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 3,
            "w": 23,
            "x": 0,
            "y": 1
          },
          "id": 37,
          "links": [],
          "options": {
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "7.1.0-beta1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "datname"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "usename"
                  ],
                  "type": "tag"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Calls"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Total"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "rows_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Rows"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "max_time_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "max"
                  },
                  {
                    "params": [
                      "Max"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / sum(\"calls_10m\")"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Mean"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "shared_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"shared_blks_hit_10m\") + sum(\"shared_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Shared Hit"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "local_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"local_blks_hit_10m\") + sum(\"local_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Local Hit"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "title": "",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
                },
                "indexByName": {
                  "% Local Hit": 10,
                  "% Shared Hit": 9,
                  "Calls": 5,
                  "Max": 7,
                  "Mean": 8,
                  "Rows": 6,
                  "Time": 0,
                  "Total": 4,
                  "datname": 2,
                  "host": 1,
                  "usename": 3
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "table"
        },
        {
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": null,
                "width": 100
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "query_md5"
                },
                "properties": [
                  {
                    "id": "custom.width"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 23,
            "x": 0,
            "y": 4
          },
          "id": 36,
          "links": [],
          "options": {
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Total"
              }
            ]
          },
          "pluginVersion": "7.1.0-beta1",
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "datname"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "usename"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Calls"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Total"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "rows_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Rows"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "max_time_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "max"
                  },
                  {
                    "params": [
                      "Max"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / sum(\"calls_10m\")"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Mean"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "shared_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"shared_blks_hit_10m\") + sum(\"shared_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Shared Hit"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "local_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"local_blks_hit_10m\") + sum(\"local_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Local Hit"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "title": "",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
                },
                "indexByName": {
                  "% Local Hit": 11,
                  "% Shared Hit": 10,
                  "Calls": 6,
                  "Max": 8,
                  "Mean": 9,
                  "Rows": 7,
                  "Time": 0,
                  "Total": 5,
                  "datname": 2,
                  "host": 1,
                  "query_md5": 4,
                  "usename": 3
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "table"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 0,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 66,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "hideEmpty": true,
            "hideZero": true,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 200,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "($tag_host) $tag_query_md5",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/($__interval_ms / 1000 / 60)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Sum: Query Duration / min",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 6,
          "gridPos": {
            "h": 5,
            "w": 9,
            "x": 7,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 67,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 1,
          "maxDataPoints": 100,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:473",
              "alias": "Sum Duration per minute by Query / Sum Duration per minute by DB",
              "color": "#336699"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Sum Duration per minute by Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "SELECT sum(\"duration_10m\") as \"Sum Duration per minute by Query\" FROM \"$archive\".\"pg_stat_statements_query_md5\" WHERE (\"datname\" =~ /^$datname$/ AND \"host\" =~ /^$host$/ AND \"usename\" =~ /^$usename$/ AND \"queryid\" =~ /^$queryid$/ AND \"query_md5\" =~ /^$query_md5$/) AND $timeFilter GROUP BY time($__interval), \"query_md5\" fill(null)",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Sum Duration per minute by Query"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            },
            {
              "alias": "Sum Duration per minute by DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "SELECT sum(\"duration_10m\") as \"Sum Duration per minute by DB\" FROM \"$archive\".\"pg_stat_statements_query_md5\" WHERE (\"datname\" =~ /^$datname$/ AND \"host\" =~ /^$host$/ AND \"usename\" =~ /^$usename$/) AND $timeFilter GROUP BY time($__interval), \"query_md5\" fill(null)",
              "rawQuery": false,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Sum Duration per minute by DB"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query duration / DB duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "Sum Duration per minute by Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Sum Duration per minute by DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": null,
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 16,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 68,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_query_md5 ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls_10m)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Duration)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "Средняя интенсивность вызовов запроса за минуту.\nИзмеряется в запросах в сек (RPS)",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 0,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 69,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 200,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:9603",
              "alias": "RPS",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "($tag_host) $tag_query_md5",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ($__interval_ms / 1000)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "reqps",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 9,
            "x": 7,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 79,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 3,
          "maxDataPoints": 100,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "seriesOverrides": [
            {
              "$$hashKey": "object:9465",
              "alias": "RPS Query / RPS DB",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "RPS Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            },
            {
              "alias": "RPS DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls / DB Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": "RPS Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "RPS DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 16,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 80,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "hideEmpty": true,
            "hideZero": true,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_query_md5 ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "rows_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls_10m)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Rows)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 0,
              "format": "none",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "columns": [],
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {}
            },
            "overrides": []
          },
          "fontSize": "100%",
          "gridPos": {
            "h": 15,
            "w": 24,
            "x": 0,
            "y": 18
          },
          "id": 46,
          "links": [],
          "pageSize": 1,
          "repeat": "query_md5",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "scroll": true,
          "showHeader": true,
          "sort": {
            "col": 6,
            "desc": true
          },
          "styles": [
            {
              "$$hashKey": "object:1593",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "Time",
              "thresholds": [],
              "type": "hidden",
              "unit": "short"
            },
            {
              "$$hashKey": "object:1613",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "last",
              "thresholds": [],
              "type": "hidden",
              "unit": "short"
            }
          ],
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "query"
                  ],
                  "type": "tag"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "SELECT last(\"calls\") FROM \"$archive\".\"pg_stat_statements_diff\" WHERE (\"query_md5\" =~ /^$query_md5$/ AND \"queryid\" =~ /^$queryid$/ AND \"datname\" =~ /^$datname$/) GROUP BY \"query\"",
              "rawQuery": true,
              "refId": "D",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "calls"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "last"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$host$/"
                },
                {
                  "condition": "AND",
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                }
              ]
            }
          ],
          "title": "Query Text of $query_md5",
          "transform": "table",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "Calls": 7,
                  "Max": 9,
                  "Mean": 10,
                  "Rows": 8,
                  "Time": 0,
                  "Total": 6,
                  "datname": 1,
                  "query": 5,
                  "query_md5": 4,
                  "queryid": 3,
                  "usename": 2
                },
                "renameByName": {}
              }
            }
          ],
          "type": "table-old"
        }
      ],
      "title": "Сводная статистика по QueryID = ${queryid}",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": null,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 92,
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 0,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 94,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_query_md5 ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/($__interval_ms / 1000 / 60)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Sum: Query Duration / min",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 6,
          "gridPos": {
            "h": 5,
            "w": 9,
            "x": 7,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 96,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 1,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:473",
              "alias": "Sum Duration per minute by Query / Sum Duration per minute by DB",
              "color": "#336699"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Sum Duration per minute by Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "query": "SELECT sum(\"duration_10m\") as \"Sum Duration per minute by Query\" FROM \"$archive\".\"pg_stat_statements_query_md5\" WHERE (\"datname\" =~ /^$datname$/ AND \"host\" =~ /^$host$/ AND \"usename\" =~ /^$usename$/ AND \"queryid\" =~ /^$queryid$/ AND \"query_md5\" =~ /^$query_md5$/) AND $timeFilter GROUP BY time($__interval), \"query_md5\" fill(null)",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Sum Duration per minute by Query"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            },
            {
              "alias": "Sum Duration per minute by DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "query": "SELECT sum(\"duration_10m\") as \"Sum Duration per minute by DB\" FROM \"$archive\".\"pg_stat_statements_query_md5\" WHERE (\"datname\" =~ /^$datname$/ AND \"host\" =~ /^$host$/ AND \"usename\" =~ /^$usename$/) AND $timeFilter GROUP BY time($__interval), \"query_md5\" fill(null)",
              "rawQuery": false,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Sum Duration per minute by DB"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query duration / DB duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "Sum Duration per minute by Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Sum Duration per minute by DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": null,
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 16,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 98,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_query_md5",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Duration)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "Средняя интенсивность вызовов запроса за минуту.\nИзмеряется в запросах в сек (RPS)",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 0,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 100,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:9603",
              "alias": "RPS",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": true,
          "targets": [
            {
              "alias": "$tag_query_md5 ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ($__interval_ms / 1000)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "reqps",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 9,
            "x": 7,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 102,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 3,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "repeat": null,
          "seriesOverrides": [
            {
              "$$hashKey": "object:9465",
              "alias": "RPS Query / RPS DB",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "RPS Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            },
            {
              "alias": "RPS DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls / DB Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": "RPS Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "RPS DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 7,
            "x": 16,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 104,
          "interval": "1m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 1000,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:732",
              "alias": "/.*/"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$tag_query_md5 ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$new",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "rows"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Rows)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 0,
              "format": "none",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "title": "Детальная статистика по QueryID = ${queryid} (есть данные только за последние 7 дней)",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": null,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 2
      },
      "id": 44,
      "panels": [
        {
          "columns": [],
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {}
            },
            "overrides": []
          },
          "fontSize": "100%",
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 3
          },
          "id": 56,
          "links": [],
          "pageSize": 5,
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "scroll": false,
          "showHeader": true,
          "sort": {
            "col": 4,
            "desc": true
          },
          "styles": [
            {
              "$$hashKey": "object:283",
              "alias": "Time",
              "align": "auto",
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "pattern": "Time",
              "type": "hidden"
            },
            {
              "$$hashKey": "object:284",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 0,
              "mappingType": 1,
              "pattern": "Calls",
              "thresholds": [],
              "type": "number",
              "unit": "none"
            },
            {
              "$$hashKey": "object:285",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "Total",
              "thresholds": [],
              "type": "number",
              "unit": "ms"
            },
            {
              "$$hashKey": "object:286",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "Max",
              "thresholds": [],
              "type": "number",
              "unit": "ms"
            },
            {
              "$$hashKey": "object:287",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "Mean",
              "thresholds": [],
              "type": "number",
              "unit": "ms"
            },
            {
              "$$hashKey": "object:288",
              "alias": "",
              "align": "auto",
              "colorMode": "cell",
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "% Shared Hit",
              "thresholds": [
                "0.1",
                "0.7"
              ],
              "type": "number",
              "unit": "percentunit"
            },
            {
              "$$hashKey": "object:289",
              "alias": "",
              "align": "auto",
              "colorMode": "cell",
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "% Local Hit",
              "thresholds": [
                "0.1",
                "0.7"
              ],
              "type": "number",
              "unit": "percentunit"
            },
            {
              "$$hashKey": "object:290",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 0,
              "mappingType": 1,
              "pattern": "Rows",
              "thresholds": [],
              "type": "number",
              "unit": "none"
            },
            {
              "$$hashKey": "object:990",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": null,
              "mappingType": 1,
              "pattern": "queryid",
              "thresholds": [],
              "type": "number",
              "unit": "none"
            },
            {
              "$$hashKey": "object:291",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "decimals": 2,
              "pattern": "/.*/",
              "thresholds": [],
              "type": "number",
              "unit": "short"
            }
          ],
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "datname"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "usename"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "queryid"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "query_md5"
                  ],
                  "type": "tag"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Calls"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Total"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "rows_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "Rows"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "max_time_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "max"
                  },
                  {
                    "params": [
                      "Max"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / sum(\"calls_10m\")"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Mean"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "shared_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"shared_blks_hit_10m\") + sum(\"shared_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Shared Hit"
                    ],
                    "type": "alias"
                  }
                ],
                [
                  {
                    "params": [
                      "local_blks_hit_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ( sum(\"local_blks_hit_10m\") + sum(\"local_blks_read_10m\"))"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "% Local Hit"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                },
                {
                  "condition": "AND",
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$host$/"
                },
                {
                  "condition": "AND",
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "title": "",
          "transform": "table",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
                },
                "indexByName": {
                  "% Local Hit": 12,
                  "% Shared Hit": 11,
                  "Calls": 7,
                  "Max": 9,
                  "Mean": 10,
                  "Rows": 8,
                  "Time": 0,
                  "Total": 6,
                  "datname": 2,
                  "host": 1,
                  "query_md5": 5,
                  "queryid": 4,
                  "usename": 3
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "table-old"
        },
        {
          "columns": [],
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {}
            },
            "overrides": []
          },
          "fontSize": "100%",
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 5
          },
          "id": 90,
          "links": [],
          "pageSize": 1,
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "scroll": true,
          "showHeader": true,
          "sort": {
            "col": 6,
            "desc": true
          },
          "styles": [
            {
              "$$hashKey": "object:1593",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "Time",
              "thresholds": [],
              "type": "hidden",
              "unit": "short"
            },
            {
              "$$hashKey": "object:1613",
              "alias": "",
              "align": "auto",
              "colorMode": null,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "dateFormat": "YYYY-MM-DD HH:mm:ss",
              "decimals": 2,
              "mappingType": 1,
              "pattern": "last",
              "thresholds": [],
              "type": "hidden",
              "unit": "short"
            }
          ],
          "targets": [
            {
              "groupBy": [
                {
                  "params": [
                    "query"
                  ],
                  "type": "tag"
                }
              ],
              "hide": false,
              "measurement": "pg_stat_statements_diff",
              "orderByTime": "ASC",
              "policy": "$archive",
              "query": "SELECT last(\"calls\") FROM \"$archive\".\"pg_stat_statements_diff\" WHERE (\"query_md5\" =~ /^$query_md5$/ AND \"queryid\" =~ /^$queryid$/ AND \"datname\" =~ /^$datname$/) GROUP BY \"query\"",
              "rawQuery": true,
              "refId": "D",
              "resultFormat": "table",
              "select": [
                [
                  {
                    "params": [
                      "calls"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "last"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "host",
                  "operator": "=~",
                  "value": "/^$host$/"
                },
                {
                  "condition": "AND",
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                }
              ]
            }
          ],
          "title": "Query Text",
          "transform": "table",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "Calls": 7,
                  "Max": 9,
                  "Mean": 10,
                  "Rows": 8,
                  "Time": 0,
                  "Total": 6,
                  "datname": 1,
                  "query": 5,
                  "query_md5": 4,
                  "queryid": 3,
                  "usename": 2
                },
                "renameByName": {}
              }
            }
          ],
          "type": "table-old"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 0,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 28,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "maxDataPoints": 200,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "Sum Duration per minute by Query ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/($__interval_ms / 1000 / 60)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Sum: Query Duration / min",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 8,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 29,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 1,
          "maxDataPoints": 100,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Sum Duration per minute by Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            },
            {
              "alias": "Sum Duration per minute by DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query duration / DB duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Query duration %",
                "binary": {
                  "left": "Sum Duration per minute by Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Sum Duration per minute by DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": null,
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 16,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 26,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [
            {
              "$$hashKey": "object:897",
              "alias": "/.*/",
              "linewidth": 3
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$col ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "duration_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls_10m)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Duration)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 1,
              "format": "ms",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "Средняя интенсивность вызовов запроса за минуту.\nИзмеряется в запросах в сек (RPS)",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 0,
            "y": 18
          },
          "hiddenSeries": false,
          "id": 30,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 2,
          "maxDataPoints": 200,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [
            {
              "$$hashKey": "object:9603",
              "alias": "RPS",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "RPS ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      " / ($__interval_ms / 1000)"
                    ],
                    "type": "math"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "reqps",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 10,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 8,
            "y": 18
          },
          "hiddenSeries": false,
          "id": 27,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 3,
          "maxDataPoints": 100,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [
            {
              "$$hashKey": "object:9465",
              "alias": "RPS Query / RPS DB",
              "color": "#FF9830"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": true,
          "targets": [
            {
              "alias": "RPS Query",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            },
            {
              "alias": "RPS DB",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "calls_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Query Calls / DB Calls",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": "RPS Query",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "RPS DB"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$db",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 16,
            "y": 18
          },
          "hiddenSeries": false,
          "id": 35,
          "interval": "10m",
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 3,
          "nullPointMode": "null",
          "percentage": false,
          "pluginVersion": "7.1.0-beta1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "scopedVars": {
            "query_md5": {
              "selected": false,
              "text": "efdafba4-2296-cdf1-a682-aeb21d748a27",
              "value": "efdafba4-2296-cdf1-a682-aeb21d748a27"
            }
          },
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "$col ($tag_host)",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "host"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "pg_stat_statements_query_md5",
              "orderByTime": "ASC",
              "policy": "$archive",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "rows_10m"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "sum"
                  },
                  {
                    "params": [
                      "/sum(calls_10m)"
                    ],
                    "type": "math"
                  },
                  {
                    "params": [
                      "Avg"
                    ],
                    "type": "alias"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "datname",
                  "operator": "=~",
                  "value": "/^$datname$/"
                },
                {
                  "condition": "AND",
                  "key": "usename",
                  "operator": "=~",
                  "value": "/^$usename$/"
                },
                {
                  "condition": "AND",
                  "key": "queryid",
                  "operator": "=~",
                  "value": "/^$queryid$/"
                },
                {
                  "condition": "AND",
                  "key": "query_md5",
                  "operator": "=~",
                  "value": "/^$query_md5$/"
                }
              ]
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Avg (Query Rows)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:4547",
              "decimals": 0,
              "format": "none",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:4548",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "repeat": "query_md5",
      "title": "Детальная статистика по Query c MD5 = $query_md5",
      "type": "row"
    }
  ],
  "refresh": false,
  "schemaVersion": 26,
  "style": "dark",
  "tags": [
    "influxdb",
    "PostgreSQL"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "Influx-production-1",
          "value": "Influx-production-1"
        },
        "hide": 2,
        "includeAll": false,
        "label": "DataBase for annotation",
        "multi": false,
        "name": "db_jmeter",
        "options": [],
        "query": "influxdb",
        "queryValue": "",
        "refresh": 1,
        "regex": "/^Influx-.*-1$/i",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "current": {
          "selected": false,
          "text": "PostgreSQL Query: influx-production-1",
          "value": "PostgreSQL Query: influx-production-1"
        },
        "hide": 2,
        "includeAll": false,
        "label": "DataBase",
        "multi": false,
        "name": "db",
        "options": [],
        "query": "influxdb",
        "refresh": 1,
        "regex": "/PostgreSQL Query: ${db_jmeter:regex}/i",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": "autogen",
          "value": "autogen"
        },
        "datasource": "$db",
        "definition": "",
        "hide": 2,
        "includeAll": false,
        "label": "Retention policy (archive)",
        "multi": false,
        "name": "archive",
        "options": [],
        "query": "SHOW RETENTION POLICIES",
        "refresh": 2,
        "regex": "/^autogen$/",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": "7d",
          "value": "7d"
        },
        "datasource": "$db",
        "definition": "",
        "hide": 2,
        "includeAll": false,
        "label": "Retention Policy (new)",
        "multi": false,
        "name": "new",
        "options": [],
        "query": "SHOW RETENTION POLICIES",
        "refresh": 2,
        "regex": "/^(?!$archive$).*$/",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "3162981644",
          "value": "3162981644"
        },
        "hide": 0,
        "label": "queryid",
        "name": "queryid",
        "options": [
          {
            "selected": false,
            "text": "3162981644",
            "value": "3162981644"
          }
        ],
        "query": "4281998489",
        "skipUrlSync": false,
        "type": "textbox"
      },
      {
        "allValue": "",
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": "$db",
        "definition": "SELECT DISTINCT(\"host\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"queryid\"=~/^${queryid:regex}$/ AND $timeFilter GROUP BY \"host\")",
        "hide": 2,
        "includeAll": true,
        "label": "PostgreSQL host",
        "multi": true,
        "name": "host",
        "options": [],
        "query": "SELECT DISTINCT(\"host\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"queryid\"=~/^${queryid:regex}$/ AND $timeFilter GROUP BY \"host\")",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": "",
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": "$db",
        "definition": "SELECT DISTINCT(\"datname\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"queryid\"=~/^${queryid:regex}$/ AND \"host\" =~ /^${host:regex}$/ AND $timeFilter GROUP BY \"datname\")",
        "hide": 2,
        "includeAll": true,
        "label": "PostgreSQL DB",
        "multi": true,
        "name": "datname",
        "options": [],
        "query": "SELECT DISTINCT(\"datname\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"queryid\"=~/^${queryid:regex}$/ AND \"host\" =~ /^${host:regex}$/ AND $timeFilter GROUP BY \"datname\")",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": ".*",
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": "$db",
        "definition": "SELECT DISTINCT(\"usename\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE $timeFilter AND \"queryid\"=~/^${queryid:regex}$/ AND \"datname\" =~ /^${datname:regex}$/ AND \"host\" =~ /^${host:regex}$/  GROUP BY \"usename\")",
        "hide": 0,
        "includeAll": true,
        "label": "PostgreSQL User",
        "multi": true,
        "name": "usename",
        "options": [],
        "query": "SELECT DISTINCT(\"usename\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE $timeFilter AND \"queryid\"=~/^${queryid:regex}$/ AND \"datname\" =~ /^${datname:regex}$/ AND \"host\" =~ /^${host:regex}$/  GROUP BY \"usename\")",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "SELECT DISTINCT(\"usename\") FROM (SELECT last(\"calls\") FROM \"$new\".\"pg_stat_statements\" WHERE \"datname\" =~ /^${tag:regex}$/  AND \"host\" =~ /^${host:regex}$/ GROUP BY \"usename\")",
        "tags": [
          {
            "text": "ib"
          }
        ],
        "tagsQuery": "SELECT DISTINCT(\"datname\") FROM (SELECT last(\"calls\") FROM \"$new\".\"pg_stat_statements\" WHERE \"datname\" =~ /^${datname:regex}$/  AND \"host\" =~ /^${host:regex}$/ GROUP BY \"datname\")",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": "$db",
        "definition": "SELECT DISTINCT(\"query_md5\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"datname\" =~ /^${datname:regex}$/ AND \"queryid\" =~ /^${queryid:regex}$/  AND $timeFilter GROUP BY \"query_md5\")",
        "hide": 0,
        "includeAll": true,
        "label": null,
        "multi": true,
        "name": "query_md5",
        "options": [],
        "query": "SELECT DISTINCT(\"query_md5\") FROM (SELECT last(\"calls_10m\") FROM \"${archive}\".\"pg_stat_statements_query_md5\" WHERE \"datname\" =~ /^${datname:regex}$/ AND \"queryid\" =~ /^${queryid:regex}$/  AND $timeFilter GROUP BY \"query_md5\")",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      }
    ]
  },
  "time": {
    "from": "now-15m",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options": [
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone": "",
  "title": "PostgreSQL Query Details",
  "uid": "pgquery",
  "version": 61
}